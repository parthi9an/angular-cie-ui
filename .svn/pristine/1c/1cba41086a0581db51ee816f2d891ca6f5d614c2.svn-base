/**
 * Tool Window Event controller
 */

function ToolWindowEventCtrl(conf, apiUrl, apiService, $scope, $http,
		$localStorage, $modal, $compile) {

	var _this = this;
	
	this.init = function() {

		var args = ($localStorage.searchFilterArgs != undefined) ? $localStorage.searchFilterArgs
				: {};
		_this.getCountOfMovedWindow(args);
	}

	$scope.$on('populateSearch', function(event, args) {

		$localStorage.searchFilterArgs = args;
		_this.getCountOfMovedWindow(args);
	});

	/*
	 * Counts of how many times each window is moved or resized
            what views are visible when they do this?
	 * Pie chart
	 */

	this.getCountOfMovedWindow = function(args) {
		apiService.getWithParams(apiUrl.GET_COUNT_OF_MOVED_WINDOW, args,
				function(data, status) {
					_this.windowData = data;
				});
	}

	this.init();

}

/**
 * 
 * Pass all functions into module
 */

angular.module('cie')
		.controller('ToolWindowEventCtrl', ToolWindowEventCtrl);