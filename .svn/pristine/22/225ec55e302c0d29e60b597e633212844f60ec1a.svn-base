/**
 * MainCtrl - controller Contains severals global data used in diferent view
 * 
 */
function MainCtrl(conf, apiUrl, apiService, $scope, $http, $anchorScroll,
		$location, $localStorage, $modal, $compile) {

	var _this = this;

	_this.minRange = 1;
	_this.maxRange = 10;

	/*
	 * Sample data
	 * 
	 * this.patternData = [ {
		"pattern" : "#12:4_#21:3",
		"pattern_class" : "Action_KeyB",
		"association_count" : 6
	}, {
		"pattern" : "#12:5_#26:1_#36:2",
		"pattern_class" : "Action_View_Window",
		"association_count" : 2
	}, {
		"pattern" : "#12:5_#26:1_#36:2_#25:2_#32:5_#19:9_#73:7",
		"pattern_class" : "Action_View_Window_View_KeyB_Config_Environment",
		"association_count" : 1
	} ];
	*/

		
	/*
	 * Range Filter
	 */
	angular.element(document).ready(
			function() {

				var track = function(data) {
					console.log(data);
					_this.minRange = data.fromNumber;
					_this.maxRange = data.toNumber;
					var $scopeRe = angular
							.element($("#patternRangeFilterData")).scope();
					$compile($scopeRe);
					$scopeRe.$apply();
				};
				$("#patternRange").ionRangeSlider({
					type : "double",
					min : 1,
					max : 10,
					from : 1,
					to : 10,
					step : 1,
					onStart : track,
					onChange : track,
					onFinish : track,
					onUpdate : track
				});
			});

}

angular.module('cie').controller('MainCtrl', MainCtrl);

angular.module('cie').filter("removeClusterInfo", function() {
	return function(data) {
		return data.replace(':', '_');
	};
});

angular.module('cie').filter(
		"eventIcon",
		function() {
			return function(name) {
				var icon = (name.match('KeyBoardEvent')) ? "fa-keyboard-o" 
						: (name.match('ActionEvent')) ? "fa-cogs"
						: (name.match('ViewEvent')) ? "fa-eye" 
						: (name.match('ErrorEvent')) ? "fa-times-circle" 
						: (name.match('ConfigurationEvent')) ? "fa-wrench" 
						: (name.match('WindowEvent')) ? "fa-desktop" 
						: (name.match('EnvironmentEvent')) ? "fa-cubes" 
						: (name.match('DomainEvent')) ? "fa-globe" 
						: (name.match('FieldEvent')) ? "fa-tags" 
						: "fa-square";
				var event = name.split(';');

				return "<i class='fa " + icon + "'></i> " + event[1];

			};
		});
