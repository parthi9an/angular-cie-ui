<div ng-controller="EventSearchCtrl as sCtrl">
	<div class="row">

		<div class="col-lg-12">
			<div class="ibox float-e-margins" ng-mouseenter="show = true"
				ng-mouseleave="show = false">
				<div class="ibox-title">
					<h5>
						Saved Filter <small>Mouse over here to see filter list</small>
					</h5>
					<button class="btn-danger btn btn-xs"
						style="margin: 2px; float: right;"
						ng-disabled="sCtrl.totalFilterCount == 0"
						ng-click="sCtrl.deleteAllFilter()">Delete All</button>
					<button class="btn-primary btn btn-xs"
						style="margin: 2px; float: right;"
						ng-click="sCtrl.viewAllFilter=true;sCtrl.getSavedFilters()"
						ng-disabled="sCtrl.viewAllFilter || sCtrl.totalFilterCount <= sCtrl.defaultLimit">View
						All</button>
					<br />
				</div>
				<div class="ibox-content animated fadeIn" id="savedFilterList"
					ng-show="show">
					<div class="limited-saved-filter" ng-show="!sCtrl.viewAllFilter">

						<table ng-show="!sCtrl.savedFilterLoading"
							dt-options="sCtrl.dtSavedFilterOpt"
							class="table table-striped table-bordered table-hover dataTables-example">
							<thead>
								<tr>
									<th>Name</th>
									<th>Source</th>
									<th>Server</th>
									<th>User</th>
									<th>Session</th>
									<th>From Date</th>
									<th>To Date</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								<tr
									ng-repeat="filter in sCtrl.savedFilterList |  orderBy:'-timestamp'"
									ng-click="sCtrl.setSearchFilter(filter)">
									<!--  | orderBy:'timestamp' -->

									<td>{{filter.filtername}}</td>
									<td>{{filter.source}}</td>
									<td>{{filter.serverId}}</td>
									<td>{{filter.userId}}</td>
									<td>{{filter.sessionId}}</td>
									<td>{{filter.fromDate | date:'yyyy-MM-dd HH:mm:ss.sss'}}</td>
									<td>{{filter.toDate | date:'yyyy-MM-dd HH:mm:ss.sss'}}</td>
									<td><button class="btn-danger btn btn-xs"
											ng-click="sCtrl.deleteFilterRecord(filter['@rid'])">
											<i class='fa fa-trash-o'></i>
										</button></td>

								</tr>
							</tbody>
						</table>
					</div>
					<div class="all-saved-filter" ng-show="sCtrl.viewAllFilter">
						<table datatable="ng" dt-options="sCtrl.dtSavedFilterAllOpt"
							ng-show="!sCtrl.savedFilterLoading"
							class="table table-striped table-bordered table-hover dataTables-example">
							<thead>
								<tr>
									<th>Name</th>
									<th>Source</th>
									<th>Server</th>
									<th>User</th>
									<th>Session</th>
									<th>From Date</th>
									<th>To Date</th>
									<th>Action</th>
								</tr>
							</thead>
							<tbody>
								<tr
									ng-repeat="filter in sCtrl.savedFilterList |  orderBy:'-timestamp'"
									ng-click="sCtrl.setSearchFilter(filter)">
									<!--  | orderBy:'timestamp' -->

									<td>{{filter.filtername}}</td>
									<td>{{filter.source}}</td>
									<td>{{filter.serverId}}</td>
									<td>{{filter.userId}}</td>
									<td>{{filter.sessionId}}</td>
									<td>{{filter.fromDate | date:'yyyy-MM-dd HH:mm:ss.sss'}}</td>
									<td>{{filter.toDate | date:'yyyy-MM-dd HH:mm:ss.sss'}}</td>
									<td><button class="btn-danger btn btn-xs"
											ng-click="sCtrl.deleteFilterRecord(filter['@rid'])">
											<i class='fa fa-trash-o'></i>
										</button></td>

								</tr>
							</tbody>

						</table>
					</div>
					<div class="spiner-example" ng-show="sCtrl.savedFilterLoading">
						<div class="sk-spinner sk-spinner-three-bounce">
							<div class="sk-bounce1"></div>
							<div class="sk-bounce2"></div>
							<div class="sk-bounce3"></div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
	<div class="row border-bottom" style="margin: 0px;">
		<form role="form" class="form-inline">
			<div class="form-group">
				<div class="input-group">
					<select class="form-control" ng-model="sCtrl.selected.source"
						ng-options="e for e in sCtrl.eventSourceList track by e"
						ng-change="sCtrl.hasSourceChanged()">
						<option value="">&nbsp;&nbsp;&nbsp;All
							Source&nbsp;&nbsp;&nbsp;</option>
					</select>
				</div>
				<div class="input-group">
					<select chosen options="sCtrl.eventServerList"
						class=" form-control" ng-model="sCtrl.selected.serverId"
						ng-options="e for e in sCtrl.eventServerList track by e"
						ng-change="sCtrl.hasServerChanged()">
						<option value="">&nbsp;&nbsp;&nbsp;All Server
							&nbsp;&nbsp;&nbsp;</option>
					</select>
				</div>
				<div class="input-group">
					<select chosen options="sCtrl.eventDomainList"
						class=" form-control" ng-model="sCtrl.selected.userId"
						ng-options="e for e in sCtrl.eventDomainList track by e"
						ng-change="sCtrl.hasDomainChanged()">
						<option value="">&nbsp;&nbsp;&nbsp; All User
							&nbsp;&nbsp;&nbsp;</option>
					</select>
				</div>
				<div class="input-group">
					<select chosen options="sCtrl.eventSessionList"
						class="form-control" ng-model="sCtrl.selected.sessionId"
						ng-options="e for e in sCtrl.eventSessionList track by e"
						ng-change="sCtrl.hasSessionChanged()">
						<option value="">&nbsp;&nbsp;&nbsp; All
							Session&nbsp;&nbsp;&nbsp;</option>
					</select>
				</div>
				<div class="input-group date">
					<input id="fromDate" style='width: 140px' type="datetime"
						class="form-control" date-time ng-model="sCtrl.fromDate"
						view="date" auto-close="true" placeholder="From Date"
						ng-blur="sCtrl.hasFromDateChanged()"> <span
						class="input-group-addon"><i class="fa fa-calendar"></i></span>
				</div>
				<div class="input-group date">
					<input id="toDate" style='width: 140px' type="datetime"
						class="form-control" date-time ng-model="sCtrl.toDate" view="date"
						auto-close="true" placeholder="To Date"
						ng-blur="sCtrl.hasToDateChanged()"> <span
						class="input-group-addon"><i class="fa fa-calendar"></i></span>
				</div>
				<div class="input-group" ng-click="sCtrl.clearSearchFilter()">
					<button class="btn btn-primary" type="submit">
						<i class="fa fa-refresh"></i>
					</button>
				</div>

			</div>
		</form>
		<div class="row border-bottom" style="margin: 10px; float: right">
			<form role="form" class="form-inline">
				<div class="input-group">
					<input style='width: 150px' type="text" class="form-control"
						ng-model="sCtrl.filtername"
						placeholder="filtername{{sCtrl.totalFilterCount + 1}}">

				</div>

				<div class="input-group" ng-click="sCtrl.saveSearchFilter()">
					<button class="btn btn-primary" type="submit">
						<i class="fa fa-save"></i>
					</button>
				</div>
			</form>
		</div>
	</div>
</div>
